<!DOCTYPE html>
<!-- This is the corresponding "starter code" for 07_Markers/Infowindows in Udacity and Google's Maps
API Course, Lesson 1 -->
<html>
 <head>

   <!-- Latest compiled and minified CSS -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

   <!-- Optional theme -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

 <!-- styles put here, but you can include a CSS file and reference it instead! -->
   <style type="text/css">
     html, body { height: 100%; margin: 0; padding: 0; }

     #main {
       width: 95%;
     }
     #map {
       height: 100%;
       width: 95%;
       margin-left: auto;
       margin-right: auto;
     }
     input[type=button] {
       border-radius:20px;
       border: none;
     }
     #options-box {
       padding: 15px;
     }
     #buttons-box {
       width: auto;
     }
   </style>
 </head>
 <body>
   <div id="main">
     <div class="row" id="options-box">
       <div class="col-md-5"></div>
       <div class="col-md-7" id="buttons-box">
         <input id="show-listings" type="button" value="Show Listings">
         <input id="hide-listings" type="button" value="Hide Listings">
       </div>
     </div>
   </div>

    <div id="map"></div>

   <script>
     var map;
     // Create a new blank array for all the listing markers.
     var markers = [];
     function initMap() {
       // Constructor creates a new map - only center and zoom are required.
       map = new google.maps.Map(document.getElementById('map'), {
         center: {lat: 40.7413549, lng: -73.9980244},
         zoom: 11,
         mapTypeControl: false
       });
       // These are the real estate listings that will be shown to the user.
       // Normally we'd have these in a database instead.
       var locations = [
         {title: 'Beyonce', location: {lat: 29.7604, lng: -95.3698}},
         {title: 'Barack Obama', location: {lat: 21.3069, lng: -157.8583}},
         {title: 'Justin Bieber', location: {lat: 42.9870, lng: -81.2432}},
         {title: 'Michelle Obama', location: {lat: 41.8781, lng: -87.6298}},
         {title: 'Lebron James', location: {lat: 41.0814, lng: -81.5190}},
         {title: 'Mark Zuckerberg', location: {lat: 41.0340, lng: -73.7629}},
         {title: 'Jay Z', location: {lat: 40.6782, lng: -73.9442}}
       ];
       var largeInfowindow = new google.maps.InfoWindow();
       // The following group uses the location array to create an array of markers on initialize.
       for (var i = 0; i < locations.length; i++) {
         // Get the position from the location array.
         var position = locations[i].location;
         var title = locations[i].title;
         // Create a marker per location, and put into markers array.
          var marker = new google.maps.Marker({
           position: position,
           title: title,
           animation: google.maps.Animation.DROP,
           id: i
         });
         // Push the marker to our array of markers.
         markers.push(marker);
         // Create an onclick event to open an infowindow at each marker.
         marker.addListener('click', function() {
           populateInfoWindow(this, largeInfowindow);
         });
       }
       document.getElementById('show-listings').addEventListener('click', showListings);
       document.getElementById('hide-listings').addEventListener('click', hideListings);
     }
     // This function populates the infowindow when the marker is clicked. We'll only allow
     // one infowindow which will open at the marker that is clicked, and populate based
     // on that markers position.
     function populateInfoWindow(marker, infowindow) {
       // Check to make sure the infowindow is not already opened on this marker.
       if (infowindow.marker != marker) {
         infowindow.marker = marker;
         infowindow.setContent('<div>' + marker.title + '</div>');
         infowindow.open(map, marker);
         // Make sure the marker property is cleared if the infowindow is closed.
         infowindow.addListener('closeclick', function() {
           infowindow.marker = null;
         });
       }
     }
     // This function will loop through the markers array and display them all.
     function showListings() {
       var bounds = new google.maps.LatLngBounds();
       // Extend the boundaries of the map for each marker and display the marker
       for (var i = 0; i < markers.length; i++) {
         markers[i].setMap(map);
         bounds.extend(markers[i].position);
       }
       map.fitBounds(bounds);
     }
     // This function will loop through the listings and hide them all.
     function hideListings() {
       for (var i = 0; i < markers.length; i++) {
         markers[i].setMap(null);
       }
     }
   </script>
   <script async defer
     src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyAiQUibtZZtp2HMDo3GcmfWxYS5E43QXU4&callback=initMap">
   </script>
   <!-- Latest compiled and minified JavaScript -->
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 </body>
</html>
